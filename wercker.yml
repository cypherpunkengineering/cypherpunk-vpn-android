box: uphyca/android
build:
  steps:
    - script:
        name: build
        code: |
          gradle -PdisablePreDex --project-cache-dir=$WERCKER_CACHE_DIR build
  after-steps:
    - script:
        name: install curl
        code: |
            apt-get update -y
            apt-get install -y curl
    - slack-notifier:
        url: $SLACK_URL
        channel: dev-notifications
        username: wercker
deploy:
    steps:
        - script:
            name: Upload apk to DeployGate
            code: |
              curl -F file=@app/build/outputs/apk/app-debug.apk -F token="$DEPLOYGATE_API_KEY" https://deploygate.com/api/users/uphyca/apps
